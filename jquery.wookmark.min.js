/*!
jQuery wookmark plugin
@name jquery.wookmark.js
@author Christoph Ono (chri@sto.ph or @gbks)
@author Sebastian Helzle (sebastian@helzle.net or @sebobo)
@version 1.0.2
@date 03/12/2013
@category jQuery plugin
@copyright (c) 2009-2013 Christoph Ono (www.wookmark.com)
@license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
(function(o){var t={align:"center",container:o("body"),offset:2,autoResize:!1,itemWidth:0,resizeDelay:50};o.fn.wookmark=function(i){return null==i&&(i={}),this.wookmarkOptions=o.extend({},t,{itemWidth:o(this[0]).outerWidth()},i),this.wookmarkColumns||(this.wookmarkColumns=null,this.wookmarkContainerWidth=null),this.wookmarkLayout=function(){var o,t=this.wookmarkOptions.itemWidth+this.wookmarkOptions.offset,i=this.wookmarkOptions.container.width(),s=Math.floor((i+this.wookmarkOptions.offset)/t);switch(this.wookmarkOptions.align){case"left":case"right":o=Math.floor((s/t+this.wookmarkOptions.offset)/2);break;case"center":default:o=Math.round((i-(s*t-this.wookmarkOptions.offset))/2)}var e=0;e=null!=this.wookmarkColumns&&this.wookmarkColumns.length==s?this.wookmarkLayoutColumns(t,o):this.wookmarkLayoutFull(t,s,o),this.wookmarkOptions.container.css("height",e+"px")},this.wookmarkLayoutFull=function(t,i,s){for(var e=[];i>e.length;)e.push(0);for(this.wookmarkColumns=[];i>this.wookmarkColumns.length;)this.wookmarkColumns.push([]);for(var r,k=0,h=0,a=this.length,n=null,m=null,l=0;a>k;k++){for(r=o(this[k]),n=null,m=0,h=0;i>h;h++)(null==n||n>e[h])&&(n=e[h],m=h);r.css({position:"absolute",top:n+"px"});var u=m*t+s+"px";"right"==this.wookmarkOptions.align?r.css("right",u):r.css("left",u),e[m]=n+r.outerHeight()+this.wookmarkOptions.offset,l=Math.max(l,e[m]),this.wookmarkColumns[m].push(r)}return l},this.wookmarkLayoutColumns=function(o,t){for(var i=[];i.length<this.wookmarkColumns.length;)i.push(0);for(var s,e,r,k=0,h=this.wookmarkColumns.length,a=0,n=0;h>k;k++)for(s=this.wookmarkColumns[k],e=s.length,a=0;e>a;a++){r=s[a],r.css({top:i[k]+"px"});var m=k*o+t+"px";"right"==this.wookmarkOptions.align?r.css("right",m):r.css("left",m),i[k]+=r.outerHeight()+this.wookmarkOptions.offset,n=Math.max(n,i[k])}return n},this.wookmarkResizeTimer=null,this.wookmarkResizeMethod||(this.wookmarkResizeMethod=null),this.wookmarkOptions.autoResize&&(this.wookmarkOnResize=function(){this.wookmarkResizeTimer&&clearTimeout(this.wookmarkResizeTimer),this.wookmarkResizeTimer=setTimeout(o.proxy(this.wookmarkLayout,this),this.wookmarkOptions.resizeDelay)},this.wookmarkResizeMethod||(this.wookmarkResizeMethod=o.proxy(this.wookmarkOnResize,this)),o(window).resize(this.wookmarkResizeMethod)),this.wookmarkClear=function(){this.wookmarkResizeTimer&&(clearTimeout(this.wookmarkResizeTimer),this.wookmarkResizeTimer=null),this.wookmarkResizeMethod&&o(window).unbind("resize",this.wookmarkResizeMethod)},this.wookmarkLayout(),this.show(),this}})(jQuery);